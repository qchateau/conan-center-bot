webpackJsonp([1],{"2iXy":function(e,t){},"3qH9":function(e,t){},"7zck":function(e,t){},Atda:function(e,t){},CZhR:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),a=n("3EgV"),i=n.n(a),s=(n("7zck"),n("R0ti")),o=n.n(s),u=n("Xxa5"),c=n.n(u),l=n("exGp"),p=n.n(l),d=n("/ocq"),v={data:function(){return{}},computed:{updatedRecipesCount:function(){return this.$recipes.status.ccb_commits_count||0},date:function(){var e=new Date(this.$recipes.status.date);return e.toLocaleString("en-GB",{timeZoneName:"short"})},githubActionRunId:function(){return this.$recipes.status.github_action_run_id},githubActionUrl:function(){return this.githubActionRunId?"https://github.com/qchateau/conan-center-bot/actions/runs/"+this.githubActionRunId:null},recipes:function(){return this.$recipes.status.recipes},upToDateRecipes:function(){return this.recipes.filter(function(e){return e.up_to_date})},updatableRecipes:function(){return this.recipes.filter(function(e){return e.updatable})},autoUpdatableRecipes:function(){return this.updatableRecipes.filter(function(e){return e.updated_branch.owner&&e.updated_branch.repo&&e.updated_branch.branch})},recipesWithPrOpened:function(){return this.updatableRecipes.filter(function(e){return e.prs_opened.length>0})},updatableRecipesWithError:function(){return this.updatableRecipes.filter(function(e){return e.test_error})},inconsistentRecipes:function(){return this.recipes.filter(function(e){return e.inconsistent_versioning})},deprecatedRecipes:function(){return this.recipes.filter(function(e){return e.deprecated})},unsupportedRecipes:function(){return this.recipes.filter(function(e){return!e.supported})},duration:function(){var e=this.$recipes.status.duration,t=Math.floor(e/3600);e-=3600*t;var n=Math.floor(e/60);return e-=60*n,t>0?t+"h "+n+"m":n>0?n+"m "+Math.round(e)+"s":e.toFixed(1)+"s"}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",{attrs:{elevation:"2"}},[n("v-card-title",[n("h3",[e._v("Status")])]),e._v(" "),n("v-card-text",[n("ul",[n("li",[e._v("Date: "+e._s(e.date))]),e._v(" "),e.githubActionUrl?n("li",[e._v("\n          GitHub Action run:\n          "),n("a",{attrs:{href:e.githubActionUrl}},[e._v(e._s(e.githubActionRunId))])]):e._e(),e._v(" "),n("li",[e._v("Duration: "+e._s(e.duration))]),e._v(" "),n("li",[e._v("Parsed recipes: "+e._s(e.recipes.length))]),e._v(" "),n("li",[e._v("Up-to-date recipes: "+e._s(e.upToDateRecipes.length))]),e._v(" "),n("li",[e._v("Updatable recipes: "+e._s(e.updatableRecipes.length))]),e._v(" "),n("ul",[n("li",[e._v("Auto-updatable recipes: "+e._s(e.autoUpdatableRecipes.length))]),e._v(" "),n("li",[e._v("Recipes with a PR already opened: "+e._s(e.recipesWithPrOpened.length))]),e._v(" "),n("li",[e._v("Recipes with error: "+e._s(e.updatableRecipesWithError.length))])]),e._v(" "),n("li",[e._v("Inconsistent recipes: "+e._s(e.inconsistentRecipes.length))]),e._v(" "),n("li",[e._v("Deprecated recipes: "+e._s(e.deprecatedRecipes.length))]),e._v(" "),n("li",[e._v("Unsupported recipes: "+e._s(e.unsupportedRecipes.length))])])]),e._v(" "),n("v-card-text",[n("p",[e._v("\n        The recipe updatability data and the updated branches are auto-generated by\n        "),n("a",{attrs:{href:"https://github.com/qchateau/conan-center-bot"}},[e._v("Conan Center Bot")]),e._v(".\n      ")]),e._v(" "),n("p",[e._v("\n        Until now, "+e._s(e.updatedRecipesCount)+" recipe updates have used this tool.\n        Any help improving it is welcome !\n      ")])])],1)],1)},staticRenderFns:[]};var f=n("VU/8")(v,h,!1,function(e){n("3qH9")},"data-v-486215a4",null).exports,m={data:function(){return{search:"",expanded:[],headers:[{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Current version",align:"start",sortable:!1,value:"current.version"},{text:"Current tag",align:"start",sortable:!1,value:"current.tag"},{text:"Current version date",align:"start",sortable:!0,value:"current.date"},{text:"Current commit count",align:"start",sortable:!0,value:"current.commit_count"},{text:"New version",align:"start",sortable:!1,value:"new.version"},{text:"New tag",align:"start",sortable:!1,value:"new.tag"},{text:"New version date",align:"start",sortable:!0,value:"new.date"},{text:"New commit count",align:"start",sortable:!0,value:"new.commit_count"},{text:"Time interval",align:"start",sortable:!0,value:"time_interval"},{text:"Commits difference",align:"start",sortable:!0,value:"commits_count_difference"},{text:"Pull requests",align:"start",sortable:!0,value:"pr_value"}],enabledColumns:["Name","Current version","New version","Time interval","Pull requests"]}},methods:{canOpenPr:function(e){return e.updated_branch.owner&&e.updated_branch.repo&&e.updated_branch.branch},prError:function(e){return e.prs_opened.length>0||this.canOpenPr(e)?null:e.test_error_category||"Unknown error"},prValue:function(e){var t=this.prError(e);return t?"1"+t:this.canOpenPr(e)?"2":"3"+this.prLinks(e)[0].text},prLinks:function(e){if(e.prs_opened.length>0)return e.prs_opened.map(function(e){return{text:"#"+e.number,href:e.url}});var t=e.updated_branch;return[{text:"Open one",href:"https://github.com/"+t.owner+"/"+t.repo+"/pull/new/"+t.branch}]},formatDuration:function(e){if(!e&&0!==e)return"Unknown";var t=Math.floor(e/31536e3);e-=31536e3*t;var n=Math.floor(e/2628e3);e-=2628e3*n;var r=Math.floor(e/86400);e-=86400*r;var a=Math.floor(e/3600);e-=3600*a;var i=Math.floor(e/60),s=e-=60*i,o=function(e,t){return 1===e?"1 "+t:e+" "+t+"s"};return t>0?o(t,"year")+" "+o(n,"month"):n>0?o(n,"month")+" "+o(r,"day"):r>0?o(r,"day"):a>0?a+"h "+i+"m":i>0?i+"m "+Math.round(s)+"s":s.toFixed(1)+"s"},formatDate:function(e){return new Date(e).toLocaleString("en-GB",{timeZoneName:"short"})}},computed:{selectedRecipes:function(){var e=this,t=this.$recipes.status.recipes;return t=(t=t.filter(function(e){return!e.deprecated&&e.updatable})).map(function(t){if(t.current.date&&t.new.date){var n=new Date(t.current.date),r=new Date(t.new.date);t.time_interval=(r-n)/1e3}return t.current.commit_count&&t.new.commit_count&&(t.commits_count_difference=t.new.commit_count-t.current.commit_count),t.pr_value=e.prValue(t),t})},availableColumns:function(){return this.headers.map(function(e){return e.text})},selectedHeaders:function(){var e=this,t=this.headers.filter(function(t){return e.enabledColumns.includes(t.text)});return t.push({text:"",value:"data-table-expand"}),t}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-title",[e._v("Updatable recipes")]),e._v(" "),n("v-card-text",[n("p",[e._v("\n        Conan Center Bot attempts to auto-update the recipe, then to test the updated recipe.\n        Tests are ran on a default Ubuntu 20.04 image as provided by GitHub Actions.\n        "),n("br"),e._v('When the test passes, you can directly open a PR by clicking on "Open one".\n        '),n("br"),e._v("When it doesn't, you can see the error by expanding the row.\n      ")]),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-col",{attrs:{cols:"8"}},[n("v-select",{attrs:{items:e.availableColumns,label:"Columns",attach:"",multiple:""},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,a=t.index;return[a<=5?n("v-chip",{attrs:{label:"",outlined:"",small:""}},[a<5?n("span",[e._v(e._s(r))]):e._e(),e._v(" "),5===a?n("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.enabledColumns.length-4)+" others)")]):e._e()]):e._e()]}}]),model:{value:e.enabledColumns,callback:function(t){e.enabledColumns=t},expression:"enabledColumns"}})],1)],1)],1),e._v(" "),n("v-data-table",{attrs:{headers:e.selectedHeaders,items:e.selectedRecipes,expanded:e.expanded,"single-expand":!0,"disable-pagination":!0,"hide-default-footer":!0,search:e.search,"item-key":"name","show-expand":"",dense:""},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"item.name",fn:function(t){var r=t.item;return[n("a",{attrs:{href:r.homepage}},[e._v(e._s(r.name))])]}},{key:"item.time_interval",fn:function(t){var n=t.item;return[e._v(e._s(e.formatDuration(n.time_interval)))]}},{key:"item.current.date",fn:function(t){var n=t.item;return[e._v(e._s(e.formatDate(n.current.date)))]}},{key:"item.new.date",fn:function(t){var n=t.item;return[e._v(e._s(e.formatDate(n.new.date)))]}},{key:"item.pr_value",fn:function(t){var r=t.item;return[e.prError(r)?n("span",[e._v(e._s(e.prError(r)))]):e._l(e.prLinks(r),function(t){return n("span",{key:t.href},[n("a",{attrs:{href:t.href}},[e._v(e._s(t.text))])])})]}},{key:"expanded-item",fn:function(t){var r=t.headers,a=t.item;return[n("td",{attrs:{colspan:r.length}},[a.supported?n("span",[a.details?n("pre",[e._v(e._s(a.details))]):n("div",[e._v("No details")])]):n("span",[n("v-icon",{attrs:{dark:""}},[e._v("mdi-cancel")]),e._v("Unsupported\n          ")],1)])]}}])})],1)],1)},staticRenderFns:[]};var b=n("VU/8")(m,_,!1,function(e){n("hFgi")},"data-v-530cdc6b",null).exports,g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-title",[e._v("Inconsistent recipes")]),e._v(" "),n("v-card-text",[e._v("\n      The following recipes are not consistent with their\n      upstream versioning scheme.\n      "),n("br"),e._v("Most of the times it\n      means the recipe version is not related to\n      any upstream tag.\n      "),n("v-text-field",{attrs:{label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-data-table",{attrs:{headers:e.recipesHeaders,items:e.selectedRecipes,"single-expand":!0,"disable-pagination":!0,"hide-default-footer":!0,search:e.search,"item-key":"name",dense:""},scopedSlots:e._u([{key:"item.name",fn:function(t){var r=t.item;return[n("a",{attrs:{href:r.homepage}},[e._v(e._s(r.name))])]}}])})],1)],1)},staticRenderFns:[]};var x=n("VU/8")({data:function(){return{search:"",recipesHeaders:[{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Recipe version",align:"start",sortable:!1,value:"current.version"},{text:"Most recent upstream tag",align:"start",sortable:!1,value:"new.tag"}]}},computed:{selectedRecipes:function(){var e=this.$recipes.status.recipes;return e=e.filter(function(e){return e.inconsistent_versioning})}}},g,!1,function(e){n("Atda")},"data-v-646dba71",null).exports,w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-title",[e._v("Unsupported recipes")]),e._v(" "),n("v-card-text",[e._v("\n      The following recipes are not supported.\n      "),n("v-text-field",{attrs:{label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-data-table",{attrs:{headers:e.headers,items:e.selected,"single-expand":!0,"disable-pagination":!0,"hide-default-footer":!0,search:e.search,"item-key":"name",dense:""},scopedSlots:e._u([{key:"item.name",fn:function(t){var r=t.item;return[n("a",{attrs:{href:r.homepage}},[e._v(e._s(r.name))])]}},{key:"item.details",fn:function(t){t.headers;var r=t.item;return[n("span",[r.details?n("pre",[e._v(e._s(r.details))]):n("div",[e._v("No details")])])]}}])})],1)],1)},staticRenderFns:[]};var R=n("VU/8")({data:function(){return{search:"",headers:[{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Recipe version",align:"start",sortable:!1,value:"current.version"},{text:"Details",align:"start",sortable:!1,value:"details"}]}},computed:{selected:function(){var e=this.$recipes.status.recipes;return e=e.filter(function(e){return!e.supported})}}},w,!1,function(e){n("CZhR")},"data-v-c1b0e60e",null).exports,y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("v-card",[t("v-card-title",[this._v("API")]),this._v(" "),t("v-card-text",[this._v("\n      This website data comes from\n      "),t("a",{attrs:{href:this.apiUrl}},[this._v("this JSON file")]),this._v(". Feel free to use it.\n      "),t("json-viewer",{attrs:{value:this.$recipes.status,theme:"jv-dark"}})],1)],1)],1)},staticRenderFns:[]};var C=n("VU/8")({data:function(){return{apiUrl:this.$recipes.url}}},y,!1,function(e){n("tZ8Q")},"data-v-5e0096fe",null).exports;r.default.use(d.a);var k=new d.a({routes:[{path:"/",redirect:"/status",meta:{title:"Conan Center Bot"}},{path:"/status",name:"Status",component:f,meta:{title:"Conan Center Bot - Status"}},{path:"/updatable",name:"Updatable",component:b,meta:{title:"Conan Center Bot - Updatable"}},{path:"/inconsistent",name:"Inconsistent",component:x,meta:{title:"Conan Center Bot - Inconsistent"}},{path:"/unsupported",name:"Unsupported",component:R,meta:{title:"Conan Center Bot - Unsupported"}},{path:"/api",name:"Api",component:C,meta:{title:"Conan Center Bot - Api"}}]}),U={name:"App",data:function(){return{initialized:!1,error:null,routes:k.options.routes}},mounted:function(){var e=this;return p()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$recipes.refresh();case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.error("error: ",t.t0),e.error="Error while getting status";case 9:e.initialized=!0;case 10:case"end":return t.stop()}},t,e,[[0,5]])}))()},computed:{visibleRoutes:function(){return this.routes.filter(function(e){return e.name})}}},A={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire"}},[n("v-app-bar",{attrs:{app:"",flat:""}},[n("v-tabs",{staticClass:"ml-n9",attrs:{centered:"",color:"grey darken-1"}},e._l(e.visibleRoutes,function(t){return n("v-tab",{key:t.path,attrs:{to:t.path}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),n("v-main",[n("v-container",{attrs:{fluid:"",id:"main-container"}},[e.initialized&&!e.error?n("router-view"):n("div",{staticStyle:{"text-align":"center",padding:"30px"}},[n("h3",[e._v(e._s(e.error))])])],1)],1)],1)},staticRenderFns:[]};var $=n("VU/8")(U,A,!1,function(e){n("2iXy")},null,null).exports,N=n("mtWM"),D="https://raw.githubusercontent.com/qchateau/conan-center-bot/status/prod/v1-update.json",E={install:function(e){e.prototype.$recipes={status:e.observable({}),url:D,refresh:function(){var e=this;return p()(c.a.mark(function t(){var n,r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get(D);case 2:for(r in n=t.sent.data,e.status)delete e.status[r];for(a in n)e.status[a]=n[a];case 5:case"end":return t.stop()}},t,e)}))()}}}},S=new i.a({theme:{dark:!0}});r.default.config.productionTip=!1,r.default.use(i.a),r.default.use(o.a),r.default.use(E),new r.default({el:"#app",vuetify:S,router:k,components:{App:$},template:"<App/>"})},hFgi:function(e,t){},tZ8Q:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.ad1941e6339e3e3d91cc.js.map