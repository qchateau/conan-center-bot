webpackJsonp([1],{"2iXy":function(e,t){},"5Mfr":function(e,t){},"7zck":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),a=n("3EgV"),i=n.n(a),s=(n("7zck"),n("R0ti")),o=n.n(s),c=n("Xxa5"),u=n.n(c),p=n("exGp"),l=n.n(p),d=n("/ocq"),v={data:function(){return{}},computed:{date:function(){var e=new Date(this.$recipes.status.date);return e.toLocaleString("en-GB",{timeZoneName:"short"})},githubActionRunId:function(){return this.$recipes.status.github_action_run_id},githubActionUrl:function(){return this.githubActionRunId?"https://github.com/qchateau/conan-center-bot/runs/"+this.githubActionRunId:null},recipes:function(){return this.$recipes.status.recipes},upToDateRecipes:function(){return this.recipes.filter(function(e){return e.up_to_date})},updatableRecipes:function(){return this.recipes.filter(function(e){return e.updatable})},autoUpdatableRecipes:function(){return this.updatableRecipes.filter(function(e){return e.updated_branch.owner&&e.updated_branch.repo&&e.updated_branch.branch})},recipesWithPrOpened:function(){return this.updatableRecipes.filter(function(e){return e.prs_opened.length>0})},updatableRecipesWithError:function(){return this.updatableRecipes.filter(function(e){return e.test_error})},inconsistentRecipes:function(){return this.recipes.filter(function(e){return e.inconsistent_versioning})},unsupportedRecipes:function(){return this.recipes.filter(function(e){return!e.supported})},duration:function(){var e=this.$recipes.status.duration,t=Math.floor(e/3600);e-=3600*t;var n=Math.floor(e/60);return e-=60*n,t>0?t+"h "+n+"m":n>0?n+"m "+Math.round(e)+"s":e.toFixed(1)+"s"}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",{attrs:{elevation:"2"}},[n("v-card-title",[n("h3",[e._v("Status")])]),e._v(" "),n("v-card-text",[n("ul",[n("li",[e._v("Date: "+e._s(e.date))]),e._v(" "),e.githubActionUrl?n("li",[e._v("\n          GitHub Action run ID:\n          "),n("a",{attrs:{href:e.githubActionUrl}},[e._v(e._s(e.githubActionRunId))])]):e._e(),e._v(" "),n("li",[e._v("Duration: "+e._s(e.duration))]),e._v(" "),n("li",[e._v("Parsed recipes: "+e._s(e.recipes.length))]),e._v(" "),n("li",[e._v("Up-to-date recipes: "+e._s(e.upToDateRecipes.length))]),e._v(" "),n("li",[e._v("Updatable recipes: "+e._s(e.updatableRecipes.length))]),e._v(" "),n("ul",[n("li",[e._v("Auto-updatable recipes: "+e._s(e.autoUpdatableRecipes.length))]),e._v(" "),n("li",[e._v("Recipes with a PR already opened: "+e._s(e.recipesWithPrOpened.length))]),e._v(" "),n("li",[e._v("Recipes with error: "+e._s(e.updatableRecipesWithError.length))])]),e._v(" "),n("li",[e._v("Inconsistent recipes: "+e._s(e.inconsistentRecipes.length))]),e._v(" "),n("li",[e._v("Unsupported recipes: "+e._s(e.unsupportedRecipes.length))])])]),e._v(" "),n("v-card-text",[n("p",[e._v("\n        The recipe updatability data and the updated branches are auto-generated by\n        "),n("a",{attrs:{href:"https://github.com/qchateau/conan-center-bot"}},[e._v("Conan Center Bot")]),e._v(".\n      ")]),e._v(" "),n("p",[e._v("Any help improving this tool is welcome !")])])],1)],1)},staticRenderFns:[]};var f=n("VU/8")(v,h,!1,function(e){n("5Mfr")},"data-v-f712185c",null).exports,_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-title",[e._v("Updatable recipes")]),e._v(" "),n("v-card-text",[e._v("\n      These recipes are updatable.\n      "),n("br"),e._v('When it\'s possible to auto-update them,\n      you can directly open a PR by clicking on "Open one".\n      '),n("br"),e._v("When it's not, you can see the error by expanding the row.\n      "),n("v-text-field",{attrs:{label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-data-table",{attrs:{headers:e.recipesHeaders,items:e.selectedRecipes,expanded:e.expanded,"single-expand":!0,"disable-pagination":!0,"hide-default-footer":!0,search:e.search,"item-key":"name","show-expand":"",dense:""},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"item.name",fn:function(t){var r=t.item;return[n("a",{attrs:{href:r.homepage}},[e._v(e._s(r.name))])]}},{key:"item.prs_opened",fn:function(t){var r=t.item;return e._l(e.prLinks(r),function(t){return n("span",{key:t.href},[t.href?n("a",{attrs:{href:t.href}},[e._v(e._s(t.text))]):n("span",[e._v(e._s(t.text))])])})}},{key:"expanded-item",fn:function(t){var r=t.headers,a=t.item;return[n("td",{attrs:{colspan:r.length}},[a.supported?n("span",[a.update_error?n("pre",[e._v(e._s(a.update_error))]):n("div",[e._v("No errors")])]):n("span",[n("v-icon",{attrs:{dark:""}},[e._v("mdi-cancel")]),e._v("Unsupported\n          ")],1)])]}}])})],1)],1)},staticRenderFns:[]};var m=n("VU/8")({data:function(){return{search:"",expanded:[],recipesHeaders:[{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Recipe version",align:"start",sortable:!1,value:"recipe_version"},{text:"New version",align:"start",sortable:!1,value:"upstream_version"},{text:"Upstream tag",align:"start",sortable:!1,value:"upstream_tag"},{text:"Pull requests",align:"start",sortable:!1,value:"prs_opened"},{text:"",value:"data-table-expand"}]}},methods:{prLinks:function(e){if(e.prs_opened.length>0)return e.prs_opened.map(function(e){return{text:"#"+e.number,href:e.url}});var t=e.updated_branch;return t.owner&&t.repo&&t.branch?[{text:"Open one",href:"https://github.com/"+t.owner+"/"+t.repo+"/pull/new/"+t.branch}]:[{text:"No"}]}},computed:{selectedRecipes:function(){var e=this.$recipes.status.recipes;return e=e.filter(function(e){return e.updatable})}}},_,!1,function(e){n("hpY1")},"data-v-612e87fa",null).exports,b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-title",[e._v("Inconsistent recipes")]),e._v(" "),n("v-card-text",[e._v("\n      The following recipes are not consistent with their\n      upstream versioning scheme.\n      "),n("br"),e._v("Most of the times it\n      means the recipe version is not related to\n      any upstream tag.\n      "),n("v-text-field",{attrs:{label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-data-table",{attrs:{headers:e.recipesHeaders,items:e.selectedRecipes,"single-expand":!0,"disable-pagination":!0,"hide-default-footer":!0,search:e.search,"item-key":"name",dense:""},scopedSlots:e._u([{key:"item.name",fn:function(t){var r=t.item;return[n("a",{attrs:{href:r.homepage}},[e._v(e._s(r.name))])]}}])})],1)],1)},staticRenderFns:[]};var g=n("VU/8")({data:function(){return{search:"",recipesHeaders:[{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Recipe version",align:"start",sortable:!1,value:"recipe_version"},{text:"Most recent upstream tag",align:"start",sortable:!1,value:"upstream_tag"}]}},computed:{selectedRecipes:function(){var e=this.$recipes.status.recipes;return e=e.filter(function(e){return e.inconsistent_versioning})}}},b,!1,function(e){n("k6yi")},"data-v-8bc57e52",null).exports,x={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("v-card",[t("v-card-title",[this._v("Api")]),this._v(" "),t("v-card-text",[this._v("\n      This website data comes from\n      "),t("a",{attrs:{href:this.apiUrl}},[this._v("this JSON file")]),this._v(". Feel free to use it.\n      "),t("json-viewer",{attrs:{value:this.$recipes.status,theme:"jv-dark"}})],1)],1)],1)},staticRenderFns:[]};var R=n("VU/8")({data:function(){return{apiUrl:this.$recipes.url}}},x,!1,function(e){n("la4G")},"data-v-5e559afe",null).exports;r.default.use(d.a);var y=new d.a({routes:[{path:"/",redirect:"/status",meta:{title:"Conan Center Bot"}},{path:"/status",name:"Status",component:f,meta:{title:"Conan Center Bot - Status"}},{path:"/updatable",name:"Updatable",component:m,meta:{title:"Conan Center Bot - Updatable"}},{path:"/inconsistent",name:"Inconsistent",component:g,meta:{title:"Conan Center Bot - Inconsistent"}},{path:"/api",name:"Api",component:R,meta:{title:"Conan Center Bot - Api"}}]}),w={name:"App",data:function(){return{initialized:!1,error:null,routes:y.options.routes}},mounted:function(){var e=this;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$recipes.refresh();case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.error("error: ",t.t0),e.error="Error while getting status";case 9:e.initialized=!0;case 10:case"end":return t.stop()}},t,e,[[0,5]])}))()},computed:{visibleRoutes:function(){return this.routes.filter(function(e){return e.name})}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire"}},[n("v-app-bar",{attrs:{app:"",flat:""}},[n("v-tabs",{staticClass:"ml-n9",attrs:{centered:"",color:"grey darken-1"}},e._l(e.visibleRoutes,function(t){return n("v-tab",{key:t.path,attrs:{to:t.path}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),n("v-main",[n("v-container",{attrs:{fluid:"",id:"main-container"}},[e.initialized&&!e.error?n("router-view"):n("div",{staticStyle:{"text-align":"center",padding:"30px"}},[n("h3",[e._v(e._s(e.error))])])],1)],1)],1)},staticRenderFns:[]};var U=n("VU/8")(w,k,!1,function(e){n("2iXy")},null,null).exports,A=n("mtWM"),$=n.n(A),C="https://raw.githubusercontent.com/qchateau/conan-center-bot/status/prod/v1-update.json",S={install:function(e){e.prototype.$recipes={status:e.observable({}),url:C,refresh:function(){var e=this;return l()(u.a.mark(function t(){var n,r,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.a.get(C);case 2:for(r in n=t.sent.data,e.status)delete e.status[r];for(a in n)e.status[a]=n[a];case 5:case"end":return t.stop()}},t,e)}))()}}}},E=new i.a({theme:{dark:!0}});r.default.config.productionTip=!1,r.default.use(i.a),r.default.use(o.a),r.default.use(S),new r.default({el:"#app",vuetify:E,router:y,components:{App:U},template:"<App/>"})},hpY1:function(e,t){},k6yi:function(e,t){},la4G:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.72b11c2fc6c401be9daa.js.map